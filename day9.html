<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Web Wasn't Ready For This - Day 9</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Comic+Sans+MS&display=swap');

        :root {
            --primary-color: #ff3366;
            --secondary-color: #33cc99;
            --text-color: #333;
            --bg-color: #f0f0f0;
            --accent-color: #6633cc;
            --error-color: #cc3333;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: "Comic Sans MS", cursive, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            overflow-x: hidden;
            cursor: none;
            /* Hide default cursor */
        }

        header {
            text-align: center;
            padding: 2rem 0;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            position: relative;
            z-index: 100;
        }

        h1 {
            margin: 0;
            font-size: 2.5rem;
            text-shadow: 3px 3px 0 rgba(0, 0, 0, 0.2);
        }

        .day-counter {
            font-size: 1.2rem;
            margin-top: 0.5rem;
            font-weight: bold;
        }

        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 2rem;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 1;
        }

        .warning-box {
            background-color: #ffeecc;
            border-left: 5px solid var(--primary-color);
            padding: 1rem;
            margin: 2rem 0;
            border-radius: 5px;
        }

        .warning-box h3 {
            color: var(--primary-color);
            margin-top: 0;
        }

        .panel-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .panel {
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
            min-height: 200px;
        }

        .panel h3 {
            margin-top: 0;
            color: var(--secondary-color);
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 0.5rem;
        }

        .panel p {
            line-height: 1.5;
        }

        .cursor-settings {
            margin-top: 2rem;
            background-color: #f5f5f5;
            padding: 1.5rem;
            border-radius: 8px;
        }

        .setting-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px dashed #ccc;
        }

        .setting-label {
            font-weight: bold;
        }

        /* Custom cursor stylings */
        .custom-cursor {
            position: fixed;
            width: 24px;
            height: 24px;
            pointer-events: none;
            z-index: 9999;
            background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='2'><path d='M5 12 L19 12 M12 5 L12 19'/></svg>");
            mix-blend-mode: difference;
        }

        .follower-cursor {
            position: fixed;
            width: 16px;
            height: 16px;
            pointer-events: none;
            z-index: 9998;
            border-radius: 50%;
            opacity: 0.7;
        }

        .trail-cursor {
            position: fixed;
            width: 8px;
            height: 8px;
            pointer-events: none;
            z-index: 9990;
            border-radius: 50%;
            opacity: 0.5;
            transition: opacity 2s ease;
        }

        .sneeze-particle {
            position: fixed;
            width: 6px;
            height: 6px;
            pointer-events: none;
            z-index: 9995;
            border-radius: 50%;
            opacity: 0.7;
            transition: opacity 1s ease;
        }

        .attractable {
            transition: transform 0.2s ease;
        }

        .repellable {
            transition: transform 0.3s ease;
        }

        .cursor-playground {
            position: relative;
            width: 100%;
            min-height: 300px;
            background-color: #eef7ff;
            border-radius: 8px;
            margin: 2rem 0;
            overflow: hidden;
            border: 2px dashed var(--accent-color);
        }

        .floating-element {
            position: absolute;
            padding: 10px 20px;
            background-color: white;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            user-select: none;
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .magnetic-button {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-weight: bold;
            cursor: none;
            position: relative;
            transition: transform 0.15s ease, box-shadow 0.15s ease;
            margin: 1rem 0;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }

        .status-message {
            text-align: center;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 5px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .status-message.visible {
            opacity: 1;
        }

        .status-message.success {
            background-color: rgba(102, 204, 51, 0.2);
            color: var(--accent-color);
        }

        .status-message.error {
            background-color: rgba(204, 51, 51, 0.2);
            color: var(--error-color);
        }

        /* Special effects for cursor interactions */
        .cursor-doodle-area {
            width: 100%;
            height: 200px;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-top: 1rem;
            position: relative;
            overflow: hidden;
        }

        .doodle-line {
            position: absolute;
            pointer-events: none;
            z-index: 10;
        }

        footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 2rem;
            background-color: #333;
            color: white;
            margin-top: 2rem;
        }

        .footer-link {
            color: var(--secondary-color);
            text-decoration: none;
            font-weight: bold;
        }

        .footer-link:hover {
            text-decoration: underline;
            color: var(--primary-color);
        }

        .footer-text {
            font-style: italic;
        }

        /* Special checkbox styling */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: none;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked+.slider {
            background-color: var(--accent-color);
        }

        input:checked+.slider:before {
            transform: translateX(26px);
        }

        /* Keyframes for animations */
        @keyframes float {
            0% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-10px);
            }

            100% {
                transform: translateY(0px);
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes rotate {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        /* Interactive elements */
        .interactive-area {
            width: 100%;
            height: 300px;
            background-color: #f0f8ff;
            border-radius: 8px;
            margin: 2rem 0;
            position: relative;
            overflow: hidden;
            border: 2px dashed var(--primary-color);
        }

        .floating-target {
            position: absolute;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: transform 0.3s ease, background-color 0.3s ease;
            user-select: none;
        }

        .cursor-text {
            position: fixed;
            pointer-events: none;
            z-index: 10000;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
            transform: translate(-50%, -50%);
            opacity: 0;
            transition: opacity 0.2s ease, transform 0.2s ease;
        }

        .cursor-text.show {
            opacity: 1;
            transform: translate(-50%, -80%);
        }
    </style>
</head>

<body>
    <header>
        <h1>The Web Wasn't Ready For This</h1>
        <div class="day-counter">Day 9: Cursor Chaos</div>
    </header>

    <div class="container">
        <div class="warning-box">
            <h3>⚠️ Cursor Warning</h3>
            <p>This webpage is experimenting with bizarre cursor behaviors that may cause confusion, disorientation, or
                mild amusement. Your cursor is no longer under your complete control.</p>
            <p>Prepare for multiple fake cursors, magnetic elements, cursor trails, and spontaneous cursor sneezes. This
                is what happens when cursors refuse to follow the rules.</p>
        </div>

        <h2>Welcome to Cursor Chaos</h2>
        <p>Move your mouse around to experience the chaos. Various elements on this page will interact with your cursor
            in unexpected ways.</p>

        <div class="cursor-settings">
            <h3>Cursor Behavior Settings</h3>
            <div class="setting-row">
                <span class="setting-label">Follower Cursors</span>
                <label class="toggle-switch">
                    <input type="checkbox" id="toggle-followers" checked>
                    <span class="slider"></span>
                </label>
            </div>
            <div class="setting-row">
                <span class="setting-label">Cursor Trails</span>
                <label class="toggle-switch">
                    <input type="checkbox" id="toggle-trails" checked>
                    <span class="slider"></span>
                </label>
            </div>
            <div class="setting-row">
                <span class="setting-label">Cursor Sneezing</span>
                <label class="toggle-switch">
                    <input type="checkbox" id="toggle-sneezing" checked>
                    <span class="slider"></span>
                </label>
            </div>
            <div class="setting-row">
                <span class="setting-label">Magnetic Elements</span>
                <label class="toggle-switch">
                    <input type="checkbox" id="toggle-magnetic" checked>
                    <span class="slider"></span>
                </label>
            </div>
        </div>

        <div class="status-message" id="status-message"></div>

        <h3>Magnetic Button Playground</h3>
        <p>These buttons are either attracted to or repelled by your cursor. Try to click them... if you can!</p>

        <div class="cursor-playground">
            <button class="magnetic-button attractable" style="position: absolute; top: 30px; left: 100px;">Try to Click
                Me!</button>
            <button class="magnetic-button repellable" style="position: absolute; top: 100px; left: 300px;">I Don't Like
                Cursors</button>
            <button class="magnetic-button attractable" style="position: absolute; top: 170px; left: 500px;">Cursor
                Magnet</button>
            <button class="magnetic-button repellable" style="position: absolute; top: 100px; left: 700px;">Stay
                Away!</button>
        </div>

        <div class="panel-container">
            <div class="panel" id="panel1">
                <h3>Follower Cursors</h3>
                <p>Multiple cursors follow your real cursor with varying delay. Like a parade of persistent cursors that
                    refuse to leave you alone.</p>
            </div>

            <div class="panel" id="panel2">
                <h3>Cursor Trails</h3>
                <p>Your cursor leaves a permanent trail of smaller cursors. It's like having cursor breadcrumbs so you
                    never lose your way.</p>
            </div>

            <div class="panel" id="panel3">
                <h3>Cursor Sneezes</h3>
                <p>Your cursor occasionally "sneezes," scattering tiny cursor particles across the screen. Even cursors
                    catch colds sometimes.</p>
            </div>

            <div class="panel" id="panel4">
                <h3>Magnetic Elements</h3>
                <p>Some elements are attracted to your cursor, while others are repelled. It's like your cursor has its
                    own gravitational field.</p>
            </div>
        </div>

        <h3>Cursor Drawing Area</h3>
        <p>Move your cursor here to create a permanent trail of colorful lines.</p>
        <div class="cursor-doodle-area" id="doodle-area"></div>

        <h3>Cursor Obstacle Course</h3>
        <p>Try to touch all the circles without getting frustrated by your chaotic cursor behaviors!</p>
        <div class="interactive-area" id="obstacle-area"></div>
    </div>

    <footer>
        <a href="day8.html" class="footer-link">← Day 8: The Phantom Shopping Cart</a>
        <span class="footer-text">Cursors will never behave the same again</span>
        <a href="day10.html" class="footer-link">Day 10: Coming Soon →</a>
    </footer>

    <!-- Custom cursor elements -->
    <div class="custom-cursor" id="main-cursor"></div>
    <div class="cursor-text" id="cursor-text"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Disable default cursor on all elements
            document.querySelectorAll('*').forEach(el => {
                el.style.cursor = 'none';
            });

            // Get cursor elements and settings
            const mainCursor = document.getElementById('main-cursor');
            const cursorText = document.getElementById('cursor-text');
            const statusMessage = document.getElementById('status-message');

            // Settings toggles
            const toggleFollowers = document.getElementById('toggle-followers');
            const toggleTrails = document.getElementById('toggle-trails');
            const toggleSneezing = document.getElementById('toggle-sneezing');
            const toggleMagnetic = document.getElementById('toggle-magnetic');

            // Track cursor position
            let cursorX = 0;
            let cursorY = 0;

            // Arrays to store various cursor elements
            let followerCursors = [];
            let trailCursors = [];
            let sneezeParticles = [];

            // Follower cursors configuration
            const followerCount = 5;
            const followerColors = [
                '#ff3366', '#33cc99', '#6633cc', '#cc9933', '#3366ff'
            ];

            // Create follower cursors
            for (let i = 0; i < followerCount; i++) {
                const follower = document.createElement('div');
                follower.className = 'follower-cursor';
                follower.style.backgroundColor = followerColors[i % followerColors.length];
                document.body.appendChild(follower);

                followerCursors.push({
                    element: follower,
                    x: 0,
                    y: 0,
                    delay: (i + 1) * 80, // Increasing delay for each follower
                    lastUpdate: 0
                });
            }

            // Function to show a status message
            function showStatusMessage(message, type = 'success') {
                statusMessage.textContent = message;
                statusMessage.className = `status-message ${type} visible`;

                setTimeout(() => {
                    statusMessage.className = 'status-message';
                }, 3000);
            }

            // Function to update the main cursor position
            function updateMainCursorPosition(e) {
                cursorX = e.clientX;
                cursorY = e.clientY;

                mainCursor.style.left = `${cursorX - 12}px`;
                mainCursor.style.top = `${cursorY - 12}px`;
            }

            // Function to update follower cursors
            function updateFollowerCursors() {
                if (!toggleFollowers.checked) {
                    followerCursors.forEach(follower => {
                        follower.element.style.opacity = '0';
                    });
                    return;
                }

                const now = Date.now();

                followerCursors.forEach(follower => {
                    follower.element.style.opacity = '0.7';

                    if (now - follower.lastUpdate > follower.delay) {
                        follower.x = cursorX;
                        follower.y = cursorY;
                        follower.lastUpdate = now;
                    }

                    follower.element.style.left = `${follower.x - 8}px`;
                    follower.element.style.top = `${follower.y - 8}px`;
                });
            }

            // Function to create a cursor trail
            function createCursorTrail() {
                if (!toggleTrails.checked || Math.random() > 0.15) return;

                const trail = document.createElement('div');
                trail.className = 'trail-cursor';
                trail.style.left = `${cursorX - 4}px`;
                trail.style.top = `${cursorY - 4}px`;
                trail.style.backgroundColor = `hsl(${Math.random() * 360}, 70%, 60%)`;
                document.body.appendChild(trail);

                trailCursors.push({
                    element: trail,
                    createdAt: Date.now()
                });

                // Fade out and remove old trails
                setTimeout(() => {
                    trail.style.opacity = '0';
                    setTimeout(() => {
                        try {
                            document.body.removeChild(trail);
                            trailCursors = trailCursors.filter(t => t.element !== trail);
                        } catch (e) {
                            // Element might have been removed already
                        }
                    }, 2000);
                }, 10000);
            }

            // Function to make cursor sneeze
            function cursorSneeze() {
                if (!toggleSneezing.checked) return;

                const particleCount = Math.floor(Math.random() * 15) + 10;

                // Show sneeze text
                cursorText.textContent = "ACHOO!";
                cursorText.style.left = `${cursorX}px`;
                cursorText.style.top = `${cursorY}px`;
                cursorText.classList.add('show');

                setTimeout(() => {
                    cursorText.classList.remove('show');
                }, 1000);

                // Create particles
                for (let i = 0; i < particleCount; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'sneeze-particle';

                    const angle = Math.random() * Math.PI * 2;
                    const distance = Math.random() * 80 + 20;
                    const particleX = cursorX + Math.cos(angle) * distance;
                    const particleY = cursorY + Math.sin(angle) * distance;

                    particle.style.left = `${cursorX - 3}px`;
                    particle.style.top = `${cursorY - 3}px`;
                    particle.style.backgroundColor = `hsl(${Math.random() * 60 + 180}, 70%, 60%)`;
                    document.body.appendChild(particle);

                    const particleObject = {
                        element: particle,
                        targetX: particleX,
                        targetY: particleY,
                        x: cursorX,
                        y: cursorY,
                        progress: 0
                    };

                    sneezeParticles.push(particleObject);
                }

                showStatusMessage("Your cursor just sneezed! Bless you!", 'error');
            }

            // Function to update sneeze particles
            function updateSneezeParticles() {
                const removeParticles = [];

                sneezeParticles.forEach(particle => {
                    particle.progress += 0.05;

                    if (particle.progress >= 1) {
                        removeParticles.push(particle);
                        return;
                    }

                    const easedProgress = easeOutCubic(particle.progress);

                    particle.x = particle.x + (particle.targetX - particle.x) * 0.1;
                    particle.y = particle.y + (particle.targetY - particle.y) * 0.1;

                    particle.element.style.left = `${particle.x - 3}px`;
                    particle.element.style.top = `${particle.y - 3}px`;
                    particle.element.style.opacity = `${1 - easedProgress}`;
                });

                // Remove completed particles
                removeParticles.forEach(particle => {
                    try {
                        document.body.removeChild(particle.element);
                    } catch (e) {
                        // Element might have been removed already
                    }
                    sneezeParticles = sneezeParticles.filter(p => p !== particle);
                });
            }

            // Easing function
            function easeOutCubic(x) {
                return 1 - Math.pow(1 - x, 3);
            }

            // Function to handle magnetic elements
            function handleMagneticElements() {
                if (!toggleMagnetic.checked) {
                    document.querySelectorAll('.attractable, .repellable').forEach(el => {
                        el.style.transform = 'translate(0, 0)';
                    });
                    return;
                }

                document.querySelectorAll('.attractable').forEach(el => {
                    const rect = el.getBoundingClientRect();
                    const centerX = rect.left + rect.width / 2;
                    const centerY = rect.top + rect.height / 2;

                    const distX = cursorX - centerX;
                    const distY = cursorY - centerY;
                    const distance = Math.sqrt(distX * distX + distY * distY);

                    if (distance < 150) {
                        const strength = Math.max(0, (150 - distance) / 150);
                        const moveX = distX * strength * 0.4;
                        const moveY = distY * strength * 0.4;

                        el.style.transform = `translate(${moveX}px, ${moveY}px)`;
                    } else {
                        el.style.transform = 'translate(0, 0)';
                    }
                });

                document.querySelectorAll('.repellable').forEach(el => {
                    const rect = el.getBoundingClientRect();
                    const centerX = rect.left + rect.width / 2;
                    const centerY = rect.top + rect.height / 2;

                    const distX = cursorX - centerX;
                    const distY = cursorY - centerY;
                    const distance = Math.sqrt(distX * distX + distY * distY);

                    if (distance < 150) {
                        const strength = Math.max(0, (150 - distance) / 150);
                        const moveX = -distX * strength * 1.5;
                        const moveY = -distY * strength * 1.5;

                        el.style.transform = `translate(${moveX}px, ${moveY}px)`;
                    } else {
                        el.style.transform = 'translate(0, 0)';
                    }
                });
            }

            // Doodle area functionality
            const doodleArea = document.getElementById('doodle-area');
            let isDrawing = false;
            let lastDrawX = 0;
            let lastDrawY = 0;

            function startDrawing(e) {
                const rect = doodleArea.getBoundingClientRect();
                if (e.clientX >= rect.left && e.clientX <= rect.right &&
                    e.clientY >= rect.top && e.clientY <= rect.bottom) {
                    isDrawing = true;
                    lastDrawX = e.clientX - rect.left;
                    lastDrawY = e.clientY - rect.top;
                }
            }

            function stopDrawing() {
                isDrawing = false;
            }

            function doDoodle(e) {
                if (!isDrawing) return;

                const rect = doodleArea.getBoundingClientRect();
                if (e.clientX >= rect.left && e.clientX <= rect.right &&
                    e.clientY >= rect.top && e.clientY <= rect.bottom) {

                    const currentX = e.clientX - rect.left;
                    const currentY = e.clientY - rect.top;

                    drawLine(lastDrawX, lastDrawY, currentX, currentY);

                    lastDrawX = currentX;
                    lastDrawY = currentY;
                } else {
                    isDrawing = false;
                }
            }

            function drawLine(x1, y1, x2, y2) {
                const line = document.createElement('div');
                line.className = 'doodle-line';

                const length = Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2);
                const angle = Math.atan2(y2 - y1, x2 - x1);

                line.style.width = `${length}px`;
                line.style.height = '3px';
                line.style.backgroundColor = `hsl(${Math.random() * 360}, 80%, 50%)`;
                line.style.transformOrigin = '0 0';
                line.style.transform = `translate(${x1}px, ${y1}px) rotate(${angle}rad)`;

                doodleArea.appendChild(line);
            }

            // Set up obstacle course
            const obstacleArea = document.getElementById('obstacle-area');
            const targetCount = 6;
            let hitTargets = 0;

            function createObstacleCourse() {
                obstacleArea.innerHTML = '';
                hitTargets = 0;

                for (let i = 0; i < targetCount; i++) {
                    const target = document.createElement('div');
                    target.className = 'floating-target';
                    target.textContent = i + 1;
                    target.dataset.index = i + 1;
                    target.style.backgroundColor = 'rgba(200, 200, 200, 0.7)';

                    const posX = 50 + Math.random() * (obstacleArea.clientWidth - 100);
                    const posY = 50 + Math.random() * (obstacleArea.clientHeight - 100);

                    target.style.left = `${posX}px`;
                    target.style.top = `${posY}px`;

                    target.addEventListener('mouseover', function () {
                        if (this.classList.contains('hit')) return;

                        this.classList.add('hit');
                        this.style.backgroundColor = 'rgba(102, 204, 51, 0.7)';

                        hitTargets++;

                        if (hitTargets === targetCount) {
                            showStatusMessage("Congratulations! You've hit all targets!");
                            setTimeout(createObstacleCourse, 2000);
                        }
                    });

                    obstacleArea.appendChild(target);
                }
            }

            // Event listeners for cursor movements
            document.addEventListener('mousemove', (e) => {
                updateMainCursorPosition(e);
                handleMagneticElements();
                doDoodle(e);
            });

            document.addEventListener('mousedown', startDrawing);
            document.addEventListener('mouseup', stopDrawing);
            document.addEventListener('mouseleave', stopDrawing);

            toggleFollowers.addEventListener('change', function () {
                if (this.checked) {
                    showStatusMessage("Follower cursors enabled");
                } else {
                    showStatusMessage("Follower cursors disabled", "error");
                }
            });

            toggleTrails.addEventListener('change', function () {
                if (this.checked) {
                    showStatusMessage("Cursor trails enabled");
                } else {
                    showStatusMessage("Cursor trails disabled", "error");
                    // Remove existing trails when disabled
                    trailCursors.forEach(trail => {
                        try {
                            document.body.removeChild(trail.element);
                        } catch (e) {
                            // Element might have been removed already
                        }
                    });
                    trailCursors = [];
                }
            });

            toggleSneezing.addEventListener('change', function () {
                if (this.checked) {
                    showStatusMessage("Cursor sneezing enabled");
                } else {
                    showStatusMessage("Cursor sneezing disabled", "error");
                    // Remove existing sneeze particles when disabled
                    sneezeParticles.forEach(particle => {
                        try {
                            document.body.removeChild(particle.element);
                        } catch (e) {
                            // Element might have been removed already
                        }
                    });
                    sneezeParticles = [];
                }
            });

            toggleMagnetic.addEventListener('change', function () {
                if (this.checked) {
                    showStatusMessage("Magnetic elements enabled");
                } else {
                    showStatusMessage("Magnetic elements disabled", "error");
                    // Reset positions of all magnetic elements
                    document.querySelectorAll('.attractable, .repellable').forEach(el => {
                        el.style.transform = 'translate(0, 0)';
                    });
                }
            });

            // Schedule random cursor sneezes
            function scheduleNextSneeze() {
                const delay = Math.random() * 15000 + 5000; // Between 5-20 seconds
                setTimeout(() => {
                    if (toggleSneezing.checked) {
                        cursorSneeze();
                    }
                    scheduleNextSneeze();
                }, delay);
            }

            // Main animation loop
            function animate() {
                requestAnimationFrame(animate);

                // Update all cursor elements
                updateFollowerCursors();
                createCursorTrail();
                updateSneezeParticles();
            }

            // Initialize the page
            function init() {
                createObstacleCourse();
                scheduleNextSneeze();
                animate();

                // Initial status message
                setTimeout(() => {
                    showStatusMessage("Welcome to Cursor Chaos! Move your cursor around to experience the madness.");
                }, 1000);

                // Add click event listeners to buttons
                document.querySelectorAll('.magnetic-button').forEach(button => {
                    button.addEventListener('click', function () {
                        showStatusMessage("You actually managed to click a button! Amazing cursor skills!");
                    });
                });
            }

            // Start everything
            init();
        });
    </script>
</body>

</html>